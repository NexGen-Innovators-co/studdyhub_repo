    async generateImage(userId: string, prompt: string) {
        try {
            console.log(`[ActionService] Generating image for prompt: "${prompt}"`);
            
            const { data, error } = await this.supabase.functions.invoke('generate-image-from-text', {
                body: { 
                    description: prompt,
                    userId: userId
                }
            });

            if (error) {
                console.error('[ActionService] Error generating image:', error);
                // Return descriptive error 
                return { success: false, error: `Image generation failed: ${error.message || 'Unknown error'}` };
            }

            if (!data || !data.imageUrl) {
                console.error('[ActionService] No image URL in response:', data);
                return { success: false, error: 'No image was generated' };
            }

            return { 
                success: true, 
                imageUrl: data.imageUrl, 
                message: `ðŸŽ¨ Generated image for: "${prompt}"`,
                prompt: prompt
            };
        } catch (error: any) {
            console.error('[ActionService] Exception generating image:', error);
            return { success: false, error: `Failed to generate image: ${error.message}` };
        }
    }
